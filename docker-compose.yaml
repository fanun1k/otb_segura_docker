version: "3"
 
services:
  database:
        image: mariadb:10.5.5
        container_name: 'database_mysql'
        ports:
          - 3306:3306
        volumes:
          - ./mysqlVol/mysql:/var/lib/mysql
          - ./mysqlVol/logs/mysql:/var/log/mysql
        environment:
          MYSQL_ROOT_PASSWORD: root
          MYSQL_DATABASE: otb_segura_db
          MYSQL_USER: sa
          MYSQL_PASSWORD: sa2021
   
  php_service:
    container_name: 'apache_server'
    build: ./conf
    volumes:
      # Montamos nuestra web desde fuera en el directorio web del contenedor
      - ./api/:/var/www/html
    expose:
      - 80
    ports:
      - 80:80
    links: 
      - database